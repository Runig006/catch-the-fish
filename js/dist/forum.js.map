{"version":3,"sources":["webpack://@clarkwinkelmann/catch-the-fish/webpack/bootstrap","webpack://@clarkwinkelmann/catch-the-fish/./forum.js","webpack://@clarkwinkelmann/catch-the-fish/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addDropAreas.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addFishBasket.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addModels.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addNavLinks.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addPages.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addRoundAlert.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/Basket.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/DropArea.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/EditFish.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/EditRound.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/FishImage.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/MovingFish.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/RoundAlert.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/index.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/CaughtFishModal.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/EditFishModal.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/EditRoundModal.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/NewFishModal.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/NewRoundModal.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/models/Fish.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/models/Round.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/pages/RoundList.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/pages/RoundSettings.js","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['Component']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['Model']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['app']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/Alert']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/Button']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/CommentPost']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/HeaderPrimary']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/IndexPage']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/LinkButton']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/Modal']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/Page']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/Switch']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['components/UserCard']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['extend']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['helpers/avatar']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['helpers/username']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['models/Discussion']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['models/Forum']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['models/Post']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['models/User']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['utils/classList']\"","webpack://@clarkwinkelmann/catch-the-fish/external \"flarum.core.compat['utils/mixin']\""],"names":["fishIdFromEvent","event","data","dataTransfer","getData","match","exec","movingFishContent","dragover","model","content","push","DropArea","component","fishes","catchTheFishFishes","forEach","fish","canSee","MovingFish","oncatch","pushData","relationships","filter","f","id","addDropAttrs","attrs","modelProperty","ondrop","fishDragOver","fishId","preventDefault","app","store","getById","placement","props","request","method","url","forum","attribute","then","result","pushPayload","find","session","user","m","redraw","alert","ondragover","dropEffect","ondragenter","ondragleave","addAreaToComponent","viewName","override","concat","extend","items","add","subtree","check","bind","vdom","CommentPost","prototype","UserCard","DiscussionHero","HeaderPrimary","Basket","models","Fish","Round","Discussion","Model","hasMany","Post","User","catchTheFishBasket","Forum","catchTheFishActiveRounds","catchTheFishCanModerate","catchTheFishAnimateFlip","translationPrefix","IndexPage","LinkButton","icon","children","translator","trans","href","route","routes","catchTheFishRounds","path","RoundList","catchTheFishRound","RoundSettings","original","existing","rounds","additional","map","round","RoundAlert","Array","isArray","view","basket","fishesThatCanBePlaced","canPlace","length","draggable","ondragstart","setData","FishImage","time","moment","placeUntil","fromNow","Component","EditFish","init","dirty","processing","initNewRecord","createRecord","attributes","round_id","name","value","oninput","withAttr","updateAttribute","Button","type","className","exists","loading","disabled","readyToSave","onclick","saveRecord","deleteRecord","pushAttributes","save","onsave","catch","err","confirm","join","delete","ondelete","EditRound","starts_at","ends_at","toISOString","include_starting_pack","Switch","state","onchange","src","image_url","alt","classList","canCatch","modal","show","CaughtFishModal","AlertWithContainer","Alert","UpdateAlert","calendar","dismissible","initializers","addModels","addFishBasket","addDropAreas","addPages","addNavLinks","addRoundAlert","newName","prop","title","saveNameAndPlacement","randomPlacement","hide","namedBy","placedBy","config","avatar","username","canName","Modal","EditRoundModal","oncreateordelete","NewFishModal","NewRoundModal","apiEndpoint","mixin","hasOne","refreshRounds","Page","roundId","param","refreshFishes","EditFishModal"],"mappings":"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AAE,mBAAM;AACX/G,2DAAG,CAACwI,KAAJ,CAAUC,IAAV,CAAe,IAAIuC,6DAAJ,CAAkB;AAC7BhM,gBAAI,EAAJA,IAD6B;AAE7BqL,4BAAgB,EAAE,4BAAM;AACpB,oBAAI,CAACU,aAAL;AACH;AAJ4B,WAAlB,CAAf;AAMH,SATY;AAUbtH,gBAAQ,EAAE;AAVG,OAAjB,CADI,CAAP,CALgC,CAAP,CAAL;AAAA,KAApB,CAFJ,CANM,CAAV,CAdkB,CAAf,CAAR;AA4CH,G;;;EA9EsCmH,6D;;;;;;;;;;;;;ACT3C,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,4D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,uD;;;;;;;;;;;ACAA,mD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend, override} from 'flarum/extend';\nimport app from 'flarum/app';\nimport CommentPost from 'flarum/components/CommentPost';\nimport UserCard from 'flarum/components/UserCard';\nimport DiscussionHero from 'flarum/components/DiscussionHero';\nimport DropArea from './components/DropArea';\nimport MovingFish from './components/MovingFish';\n\nfunction fishIdFromEvent(event) {\n    const data = event.dataTransfer.getData(\"text/plain\");\n\n    const match = /^fish:([0-9]+)$/.exec(data);\n\n    return match ? match[1] : null;\n}\n\nfunction movingFishContent(dragover, model) {\n    const content = [];\n\n    if (dragover) {\n        content.push(DropArea.component());\n    }\n\n    const fishes = model.catchTheFishFishes();\n\n    if (fishes) {\n        fishes.forEach(fish => {\n            if (!fish.canSee()) {\n                return;\n            }\n\n            // Remove fish from relationship\n            content.push(MovingFish.component({\n                fish,\n                oncatch: () => {\n                    model.pushData({\n                        relationships: {\n                            catchTheFishFishes: {\n                                data: model.data.relationships.catchTheFishFishes.data.filter(f => f.id !== fish.id()),\n                            },\n                        },\n                    });\n                },\n            }));\n        });\n    }\n\n    return content;\n}\n\nfunction addDropAttrs(attrs, modelProperty) {\n    attrs.ondrop = event => {\n        this.fishDragOver = false;\n        const fishId = fishIdFromEvent(event);\n\n        if (fishId) {\n            event.preventDefault();\n\n            const fish = app.store.getById('catchthefish-fishes', fishId);\n\n            if (fish) {\n                const placement = {};\n                placement[modelProperty + '_id'] = this.props[modelProperty].id();\n\n                app.request({\n                    method: 'POST',\n                    url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + fish.id() + '/place',\n                    data: {\n                        placement,\n                    },\n                }).then(result => {\n                    app.store.pushPayload(result);\n\n                    // Refresh basket by reloading user\n                    app.store.find('users', app.session.user.id()).then(() => {\n                        m.redraw();\n                    });\n                });\n            } else {\n                alert('Invalid fish');\n            }\n        }\n    };\n    attrs.ondragover = event => {\n        const fishId = fishIdFromEvent(event);\n\n        if (fishId) {\n            event.preventDefault();\n            event.dataTransfer.dropEffect = 'move';\n            this.fishDragOver = true;\n        }\n    };\n    attrs.ondragenter = event => {\n        event.preventDefault();\n    };\n    attrs.ondragleave = () => {\n        this.fishDragOver = false;\n    };\n}\n\nfunction addAreaToComponent(component, viewName, modelProperty) {\n    if (viewName === 'content') {\n        override(component, viewName, function (content) {\n            return content().concat(movingFishContent(this.fishDragOver, this.props[modelProperty]));\n        });\n    } else {\n        extend(component, viewName, function (items) {\n            items.add('catchthefish-fish-and-drop', movingFishContent(this.fishDragOver, this.props[modelProperty]));\n        });\n    }\n\n    extend(component, 'init', function () {\n        this.fishDragOver = false;\n\n        // Add a condition to the post tree retainer\n        if (this.subtree) {\n            this.subtree.check(() => this.fishDragOver);\n        }\n    });\n\n    if (viewName === 'content') {\n        // CommentPost has an attrs() method we can extend\n        extend(component, 'attrs', function (attrs) {\n            addDropAttrs.bind(this)(attrs, modelProperty);\n        });\n    } else {\n        // For other elements we manually add attrs to the vdom of the view\n        extend(component, 'view', function (vdom) {\n            vdom.attrs = vdom.attrs || {};\n            addDropAttrs.bind(this)(vdom.attrs, modelProperty);\n        });\n    }\n}\n\nexport default function () {\n    addAreaToComponent(CommentPost.prototype, 'content', 'post');\n    addAreaToComponent(UserCard.prototype, 'infoItems', 'user');\n    addAreaToComponent(DiscussionHero.prototype, 'items', 'discussion');\n}\n","import {extend} from 'flarum/extend';\nimport HeaderPrimary from 'flarum/components/HeaderPrimary';\nimport Basket from './components/Basket';\n\nexport default function () {\n    extend(HeaderPrimary.prototype, 'items', items => {\n        items.add('catchthefish-basket', Basket.component());\n    });\n}\n","import app from 'flarum/app';\nimport Model from 'flarum/Model';\nimport Discussion from 'flarum/models/Discussion';\nimport Post from 'flarum/models/Post';\nimport User from 'flarum/models/User';\nimport Forum from 'flarum/models/Forum';\nimport Fish from './models/Fish';\nimport Round from './models/Round';\n\nexport default function () {\n    app.store.models['catchthefish-fishes'] = Fish;\n    app.store.models['catchthefish-rounds'] = Round;\n\n    Discussion.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    Post.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    User.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    User.prototype.catchTheFishBasket = Model.hasMany('catchTheFishBasket');\n    Forum.prototype.catchTheFishActiveRounds = Model.hasMany('catchTheFishActiveRounds');\n    Forum.prototype.catchTheFishCanModerate = Model.attribute('catchTheFishCanModerate');\n    Forum.prototype.catchTheFishAnimateFlip = Model.attribute('catchTheFishAnimateFlip');\n}\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport IndexPage from 'flarum/components/IndexPage';\nimport LinkButton from 'flarum/components/LinkButton';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.nav.';\n\nexport default function () {\n    extend(IndexPage.prototype, 'navItems', function (items) {\n        if (app.forum.catchTheFishCanModerate()) {\n            items.add('catchthefish-settings', LinkButton.component({\n                icon: 'fas fa-fish',\n                children: app.translator.trans(translationPrefix + 'settings'),\n                href: app.route('catchTheFishRounds'),\n            }));\n        }\n    });\n}\n","import app from 'flarum/app';\nimport RoundList from './pages/RoundList';\nimport RoundSettings from './pages/RoundSettings';\n\nexport default function () {\n    app.routes.catchTheFishRounds = {\n        path: '/catch-the-fish/rounds',\n        component: RoundList.component(),\n    };\n\n    app.routes.catchTheFishRound = {\n        path: '/catch-the-fish/rounds/:id',\n        component: RoundSettings.component(),\n    };\n}\n","import {override} from 'flarum/extend';\nimport IndexPage from 'flarum/components/IndexPage';\nimport RoundAlert from './components/RoundAlert';\n\nexport default function () {\n    override(IndexPage.prototype, 'hero', function (original) {\n        const existing = original();\n\n        const rounds = app.forum.catchTheFishActiveRounds();\n\n        if (!rounds) {\n            return existing;\n        }\n\n        // Replace missing rounds with null. Happens if you delete a round and go back to homepage\n        const additional = rounds.map(round => round ? RoundAlert.component({\n            round,\n        }) : null);\n\n        if (Array.isArray(existing)) {\n            return round.concat(existing);\n        }\n\n        return m('div', [\n            additional,\n            existing,\n        ]);\n    });\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport FishImage from './FishImage';\n\n/* global m, moment */\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.basket.';\n\nexport default class Basket extends Component {\n    view() {\n        if (!app.session.user) {\n            return m('div');\n        }\n\n        const basket = app.session.user.catchTheFishBasket();\n\n        if (!basket) {\n            return m('div');\n        }\n\n        const fishesThatCanBePlaced = basket.filter(fish => fish.canPlace());\n\n        if (fishesThatCanBePlaced.length === 0) {\n            return m('div');\n        }\n\n        return m('.catchthefish-basket', [\n            m('.catchthefish-basket-title', app.translator.trans(translationPrefix + 'title')),\n            m('p', app.translator.trans(translationPrefix + 'drag-help')),\n            fishesThatCanBePlaced.map(fish => m('.catchthefish-basket-entry', [\n                m('.catchthefish-basket-fish', {\n                    draggable: true,\n                    ondragstart(event) {\n                        event.dataTransfer.setData('text/plain', 'fish:' + fish.id());\n                    },\n                }, FishImage.component({\n                    fish,\n                })),\n                m('.catchthefish-basket-time', app.translator.trans(translationPrefix + 'time', {\n                    time: moment(fish.placeUntil()).fromNow(),\n                })),\n            ])),\n        ]);\n    }\n}\n","import Component from 'flarum/Component';\n\n/* global m */\n\nexport default class DropArea extends Component {\n    view() {\n        return m('.catchthefish-drop-area', 'Drop it here');\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\n\n/* global m */\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-fish.';\n\nexport default class EditFish extends Component {\n    init() {\n        this.fish = this.props.fish;\n        this.dirty = false;\n        this.processing = false;\n\n        if (typeof this.fish === 'undefined') {\n            this.initNewRecord();\n        }\n    }\n\n    initNewRecord() {\n        this.fish = app.store.createRecord('catchthefish-fishes', {\n            attributes: {\n                round_id: this.props.round.id(),\n                name: '',\n            },\n        });\n    }\n\n    view() {\n        return m('form', [\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.fish.name(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'name')),\n                }),\n                m('.helpText', app.translator.trans(translationPrefix + 'name-help')),\n            ]),\n            m('.ButtonGroup', [\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    children: app.translator.trans(translationPrefix + (this.fish.exists ? 'save' : 'create')),\n                    loading: this.processing,\n                    disabled: !this.readyToSave(),\n                    onclick: this.saveRecord.bind(this),\n                }),\n                (this.fish.exists ? Button.component({\n                    type: 'button',\n                    className: 'Button Button--danger',\n                    children: app.translator.trans(translationPrefix + 'delete'),\n                    loading: this.processing,\n                    onclick: this.deleteRecord.bind(this),\n                }) : ''),\n            ]),\n        ]);\n    }\n\n    updateAttribute(attribute, value) {\n        this.fish.pushAttributes({\n            [attribute]: value,\n        });\n\n        this.dirty = true;\n    }\n\n    readyToSave() {\n        if (!this.fish.name()) {\n            return false;\n        }\n\n        return this.dirty;\n    }\n\n    saveRecord() {\n        this.processing = true;\n\n        this.fish.save(this.fish.data.attributes).then(() => {\n            if (this.props.onsave) {\n                this.props.onsave();\n            }\n\n            this.processing = false;\n            this.dirty = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n\n    deleteRecord() {\n        if (!confirm(app.translator.trans(translationPrefix + 'delete-confirmation', {\n            name: this.fish.name(),\n        }).join(''))) {\n            return;\n        }\n\n        this.processing = true;\n\n        this.fish.delete().then(() => {\n            if (this.props.ondelete) {\n                this.props.ondelete();\n            }\n\n            this.processing = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport Switch from 'flarum/components/Switch';\n\n/* global m */\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-round.';\n\nexport default class EditRound extends Component {\n    init() {\n        this.round = this.props.round;\n        this.dirty = false;\n        this.processing = false;\n\n        if (typeof this.round === 'undefined') {\n            this.initNewRecord();\n        }\n    }\n\n    initNewRecord() {\n        this.round = app.store.createRecord('catchthefish-rounds', {\n            attributes: {\n                name: '',\n                starts_at: '',\n                ends_at: moment().add(1, 'day').toISOString(),\n                include_starting_pack: true,\n            },\n        });\n    }\n\n    view() {\n        return m('form', [\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.round.name(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'name')),\n                }),\n                m('.helpText', app.translator.trans(translationPrefix + 'name-help')),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'starts-at')),\n                m('input.FormControl', {\n                    value: this.round.starts_at(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'starts_at')),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'ends-at')),\n                m('input.FormControl', {\n                    value: this.round.ends_at(),\n                    oninput: m.withAttr('value', this.updateAttribute.bind(this, 'ends_at')),\n                }),\n            ]),\n            this.round.exists ? '' : m('.Form-group', [\n                m('label', [\n                    Switch.component({\n                        state: this.round.include_starting_pack(),\n                        onchange: this.updateAttribute.bind(this, 'include_starting_pack'),\n                        children: app.translator.trans(translationPrefix + 'starting-pack'),\n                    }),\n                ]),\n                m('.helpText', app.translator.trans(translationPrefix + 'starting-pack-help')),\n            ]),\n            m('.ButtonGroup', [\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    children: app.translator.trans(translationPrefix + (this.round.exists ? 'save' : 'create')),\n                    loading: this.processing,\n                    disabled: !this.readyToSave(),\n                    onclick: this.saveRecord.bind(this),\n                }),\n                (this.round.exists ? Button.component({\n                    type: 'button',\n                    className: 'Button Button--danger',\n                    children: app.translator.trans(translationPrefix + 'delete'),\n                    loading: this.processing,\n                    onclick: this.deleteRecord.bind(this),\n                }) : ''),\n            ]),\n        ]);\n    }\n\n    updateAttribute(attribute, value) {\n        this.round.pushAttributes({\n            [attribute]: value,\n        });\n\n        this.dirty = true;\n    }\n\n    readyToSave() {\n        if (!this.round.name()) {\n            return false;\n        }\n\n        return this.dirty;\n    }\n\n    saveRecord() {\n        this.processing = true;\n\n        this.round.save(this.round.data.attributes).then(() => {\n            if (this.props.onsave) {\n                this.props.onsave();\n            }\n\n            this.processing = false;\n            this.dirty = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n\n    deleteRecord() {\n        if (!confirm(app.translator.trans(translationPrefix + 'delete-confirmation', {\n            name: this.round.name(),\n        }).join(''))) {\n            return;\n        }\n\n        this.processing = true;\n\n        this.round.delete().then(() => {\n            if (this.props.ondelete) {\n                this.props.ondelete();\n            }\n\n            this.processing = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n}\n","import Component from 'flarum/Component';\n\n/* global m */\n\nexport default class FishImage extends Component {\n    view() {\n        const src = this.props.fish.image_url();\n\n        if (src) {\n            return m('img.catchthefish-image', {\n                alt: 'Image of fish ' + this.props.fish.name(),\n                src,\n            });\n        }\n\n        return m('.catchthefish-no-image', 'Missing fish image');\n    }\n}\n","import app from 'flarum/app';\nimport classList from 'flarum/utils/classList';\nimport Component from 'flarum/Component';\nimport FishImage from './FishImage';\nimport CaughtFishModal from '../modals/CaughtFishModal';\n\n/* global m */\n\nexport default class MovingFish extends Component {\n    view() {\n        const {fish} = this.props;\n\n        return m('.catchthefish-moving-fish', {\n            className: classList({\n                'catchthefish-animate-flip': app.forum.catchTheFishAnimateFlip(),\n            }),\n            onclick: () => {\n                if (!fish.canCatch() && !app.session.user) {\n                    alert(app.translator.trans('clarkwinkelmann-catch-the-fish.forum.moving-fish.login'));\n                    return;\n                }\n\n                app.request({\n                    method: 'POST',\n                    url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + fish.id() + '/catch',\n                    data: fish.placement(),\n                }).then(result => {\n                    app.modal.show(new CaughtFishModal({\n                        fish: app.store.pushPayload(result),\n                    }));\n\n                    // So the parent can remove the fish from the relationship\n                    if (this.props.oncatch) {\n                        this.props.oncatch();\n                    }\n                });\n            },\n        }, [\n            m('.catchthefish-name', fish.name()),\n            FishImage.component({\n                fish,\n            }),\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport Alert from 'flarum/components/Alert';\n\n/* global m, moment */\n\nclass AlertWithContainer extends Alert {\n    view() {\n        const vdom = super.view();\n\n        vdom.children = [\n            m('.container', vdom.children),\n        ];\n\n        return vdom;\n    }\n}\n\nexport default class UpdateAlert extends Component {\n    view() {\n        return AlertWithContainer.component({\n            type: 'info',\n            children: app.translator.trans('clarkwinkelmann-catch-the-fish.forum.round-alert.message', {\n                name: this.props.round.name(),\n                time: moment(this.props.round.ends_at()).calendar(),\n            }),\n            dismissible: false,\n        });\n    }\n}\n","import {extend} from 'flarum/extend';\nimport app from 'flarum/app';\nimport addModels from './addModels';\nimport addFishBasket from './addFishBasket';\nimport addDropAreas from './addDropAreas';\nimport addPages from './addPages';\nimport addNavLinks from './addNavLinks';\nimport addRoundAlert from './addRoundAlert';\n\napp.initializers.add('clarkwinkelmann-catch-the-fish', () => {\n    addModels();\n    addFishBasket();\n    addDropAreas();\n    addPages();\n    addNavLinks();\n    addRoundAlert();\n});\n","import app from 'flarum/app';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\nimport Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\nimport FishImage from '../components/FishImage';\n\n/* global m */\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.caught-fish-modal.';\n\nexport default class CaughtFishModal extends Modal {\n    init() {\n        super.init();\n\n        this.newName = m.prop(this.props.fish.name());\n        this.dirty = false;\n        this.loading = false;\n    }\n\n    className() {\n        return 'Modal--small catchthefish-catch-modal';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    saveNameAndPlacement(randomPlacement = false) {\n        const data = {};\n\n        if (this.dirty) {\n            data.name = this.newName();\n        }\n\n        if (randomPlacement) {\n            data.placement = 'random';\n        }\n\n        if (data) {\n            this.loading = true;\n\n            app.request({\n                method: 'POST',\n                url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + this.props.fish.id() + '/place',\n                data,\n            }).then(result => {\n                app.store.pushPayload(result);\n                this.hide();\n\n                if (this.props.fish.canPlace() && !randomPlacement) {\n                    // Refresh basket by reloading user\n                    app.store.find('users', app.session.user.id()).then(() => {\n                        m.redraw();\n                    });\n                }\n            }).catch(err => {\n                this.loading = false;\n                m.redraw();\n                throw err;\n            });\n        } else {\n            this.hide();\n\n            if (this.props.fish.canPlace() && !randomPlacement) {\n                // Refresh basket by reloading user\n                app.store.find('users', app.session.user.id()).then(() => {\n                    m.redraw();\n                });\n            }\n        }\n    }\n\n    content() {\n        const {fish} = this.props;\n\n        const namedBy = fish.namedBy();\n        const placedBy = fish.placedBy();\n\n        return m('.Modal-body', [\n            m('h3','\"' + fish.name() + '\"'),\n            FishImage.component({\n                fish,\n            }),\n            namedBy ? m('p', [\n                app.translator.trans(translationPrefix + 'named-by'),\n                ' ',\n                m('a', {\n                    href: app.route.user(namedBy),\n                    config: m.route,\n                }, [\n                    avatar(namedBy),\n                    ' ',\n                    username(namedBy),\n                ]),\n            ]) : null,\n            placedBy ? m('p', [\n                app.translator.trans(translationPrefix + 'placed-by'),\n                ' ',\n                m('a', {\n                    href: app.route.user(placedBy),\n                    config: m.route,\n                }, [\n                    avatar(placedBy),\n                    ' ',\n                    username(placedBy),\n                ]),\n            ]) : null,\n            m('p', app.translator.trans(translationPrefix + 'congratulation')),\n            fish.canName() ? m('.Form-group', [\n                m('p', app.translator.trans(translationPrefix + 'name-help')),\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.newName(),\n                    oninput: m.withAttr('value', value => {\n                        this.newName(value);\n                        this.dirty = true;\n                    }),\n                }),\n            ]) : null,\n            fish.canPlace() ? m('p', app.translator.trans(translationPrefix + 'placement-help')) : null,\n            m('.Form-group', Button.component({\n                className: 'Button Button--primary Button--block',\n                type: 'button',\n                loading: this.loading,\n                children: app.translator.trans(translationPrefix + (this.dirty ? (fish.canPlace() ? 'submit-name-place-later' : 'submit-name') : (fish.canPlace() ? 'submit-place-later' : 'submit-continue'))),\n                onclick: () => {\n                    this.saveNameAndPlacement();\n                },\n            })),\n            fish.canPlace() ? m('.Form-group', Button.component({\n                className: 'Button Button--primary Button--block',\n                type: 'button',\n                loading: this.loading,\n                children: app.translator.trans(translationPrefix + (this.dirty ? 'submit-name-place-random' : 'submit-place-random')),\n                onclick: () => {\n                    this.saveNameAndPlacement(true);\n                },\n            })) : null,\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Modal from 'flarum/components/Modal';\nimport EditFish from '../components/EditFish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-fish-modal.';\n\nexport default class EditRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title', {\n            name: this.props.fish.name(),\n        });\n    }\n\n    content() {\n        return m('.Modal-body', [\n            EditFish.component({\n                fish: this.props.fish,\n                ondelete: () => {\n                    this.hide();\n\n                    if (this.props.oncreateordelete) {\n                        this.props.oncreateordelete();\n                    }\n                },\n            }),\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Modal from 'flarum/components/Modal';\nimport EditRound from '../components/EditRound';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-round-modal.';\n\nexport default class EditRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title', {\n            name: this.props.round.name(),\n        });\n    }\n\n    content() {\n        return m('.Modal-body', [\n            EditRound.component({\n                round: this.props.round,\n                ondelete: () => {\n                    this.hide();\n\n                    if (this.props.oncreateordelete) {\n                        this.props.oncreateordelete();\n                    }\n                },\n            }),\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Modal from 'flarum/components/Modal';\nimport EditFish from '../components/EditFish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.new-fish-modal.';\n\nexport default class NewFishModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    content() {\n        return m('.Modal-body', [\n            EditFish.component({\n                round: this.props.round,\n                onsave: () => {\n                    this.hide();\n\n                    if (this.props.oncreateordelete) {\n                        this.props.oncreateordelete();\n                    }\n                },\n            }),\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Modal from 'flarum/components/Modal';\nimport EditRound from '../components/EditRound';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.new-round-modal.';\n\nexport default class NewRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    content() {\n        return m('.Modal-body', [\n            EditRound.component({\n                onsave: () => {\n                    this.hide();\n\n                    if (this.props.oncreateordelete) {\n                        this.props.oncreateordelete();\n                    }\n                },\n            }),\n        ]);\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Fish extends mixin(Model, {\n    round_id: Model.attribute('round_id'), // Just for the creation apiEndpoint creation\n    placement: Model.attribute('placement'), // Object\n    name: Model.attribute('name'),\n    image_url: Model.attribute('image_url'),\n    canSee: Model.attribute('canSee'),\n    canCatch: Model.attribute('canCatch'),\n    canName: Model.attribute('canName'),\n    canPlace: Model.attribute('canPlace'),\n    placeUntil: Model.attribute('placeUntil'),\n    namedBy: Model.hasOne('lastUserNaming'),\n    placedBy: Model.hasOne('lastUserPlacement'),\n}) {\n    apiEndpoint() {\n        return '/catch-the-fish/' + (this.exists ? 'fishes/' + this.data.id : 'rounds/' + this.data.attributes.round_id + '/fishes');\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Fish extends mixin(Model, {\n    name: Model.attribute('name'),\n    starts_at: Model.attribute('starts_at'),\n    ends_at: Model.attribute('ends_at'),\n    include_starting_pack: Model.attribute('include_starting_pack'),\n}) {\n    apiEndpoint() {\n        return '/catch-the-fish/rounds' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","import app from 'flarum/app';\nimport Page from 'flarum/components/Page';\nimport Button from 'flarum/components/Button';\nimport LinkButton from 'flarum/components/LinkButton';\nimport NewRoundModal from '../modals/NewRoundModal';\nimport EditRoundModal from '../modals/EditRoundModal';\n\n/* global m */\n\nexport default class RoundList extends Page {\n    init() {\n        super.init();\n\n        this.refreshRounds();\n    }\n\n    refreshRounds() {\n        this.rounds = null;\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/rounds',\n        }).then(result => {\n            this.rounds = app.store.pushPayload(result);\n            m.redraw();\n        });\n    }\n\n    view() {\n        if (this.rounds === null) {\n            return m('.container', m('p', 'Loading...'));\n        }\n\n        return m('.container', [\n            m('h2', 'Rounds'),\n            Button.component({\n                className: 'Button Button--primary',\n                onclick: () => {\n                    app.modal.show(new NewRoundModal({\n                        oncreateordelete: () => {\n                            this.refreshRounds();\n                        },\n                    }));\n                },\n                children: 'New',\n            }),\n            m('table', [\n                m('thead', m('tr', [\n                    m('th', 'Name'),\n                    m('th', 'From'),\n                    m('th', 'To'),\n                    m('th', 'Actions'),\n                ])),\n                m('tbody', this.rounds.map(round => m('tr', [\n                    m('td', round.name()),\n                    m('td', round.starts_at()),\n                    m('td', round.ends_at()),\n                    m('td', [\n                        Button.component({\n                            className: 'Button',\n                            onclick: () => {\n                                app.modal.show(new EditRoundModal({\n                                    round,\n                                    oncreateordelete: () => {\n                                        this.refreshRounds();\n                                    },\n                                }));\n                            },\n                            children: 'Edit',\n                        }),\n                        ' ',\n                        LinkButton.component({\n                            className: 'Button',\n                            href: app.route('catchTheFishRound', {\n                                id: round.id(),\n                            }),\n                            children: 'Fishes',\n                        }),\n                    ]),\n                ]))),\n            ]),\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport Page from 'flarum/components/Page';\nimport Button from 'flarum/components/Button';\nimport NewFishModal from '../modals/NewFishModal';\nimport EditFishModal from '../modals/EditFishModal';\nimport FishImage from '../components/FishImage';\n\n/* global m */\n\nexport default class RoundSettings extends Page {\n    init() {\n        super.init();\n\n        this.roundId = m.route.param('id');\n        this.round = app.store.getById('catchthefish-round', this.roundId);\n\n        if (!this.round) {\n            app.store.find('catch-the-fish/rounds', this.roundId).then(round => {\n                this.round = round;\n                m.redraw();\n            });\n        }\n\n        this.refreshFishes();\n    }\n\n    refreshFishes() {\n        this.fishes = null;\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/rounds/' + this.roundId + '/fishes',\n        }).then(result => {\n            this.fishes = app.store.pushPayload(result);\n            m.redraw();\n        });\n    }\n\n    view() {\n        if (!this.round || this.fishes === null) {\n            return m('.container', m('p', 'Loading...'));\n        }\n\n        return m('.container', [\n            m('h2', 'Settings for round ' + this.round.name()),\n            Button.component({\n                className: 'Button Button--primary',\n                onclick: () => {\n                    app.modal.show(new NewFishModal({\n                        round: this.round,\n                        oncreateordelete: () => {\n                            this.refreshFishes();\n                        },\n                    }));\n                },\n                children: 'New',\n            }),\n            m('table', [\n                m('thead', m('tr', [\n                    m('th', 'Image'),\n                    m('th', 'Name'),\n                    m('th', 'Actions'),\n                ])),\n                m('tbody', this.fishes.length === 0 ? m('tr', [\n                    m('td', 'No fishes'),\n                ]) : this.fishes.map(fish => m('tr', [\n                    m('td', FishImage.component({\n                        fish,\n                    })),\n                    m('td', fish.name()),\n                    m('td', [\n                        Button.component({\n                            className: 'Button',\n                            onclick: () => {\n                                app.modal.show(new EditFishModal({\n                                    fish,\n                                    oncreateordelete: () => {\n                                        this.refreshFishes();\n                                    },\n                                }));\n                            },\n                            children: 'Edit',\n                        }),\n                    ]),\n                ]))),\n            ]),\n        ]);\n    }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/DiscussionHero'];","module.exports = flarum.core.compat['components/HeaderPrimary'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UserCard'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/Forum'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}