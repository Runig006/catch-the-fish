{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@clarkwinkelmann/catch-the-fish/./node_modules/dayjs/plugin/calendar.js","webpack://@clarkwinkelmann/catch-the-fish/webpack/bootstrap","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/compat get default export","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/define property getters","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/hasOwnProperty shorthand","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/make namespace object","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/app']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/Model']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/models/Discussion']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/models/Post']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/models/User']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/models/Forum']\"","webpack://@clarkwinkelmann/catch-the-fish/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@clarkwinkelmann/catch-the-fish/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/models/Fish.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/models/Ranking.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/models/Round.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/extend']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/components/HeaderPrimary']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/FishImage.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/Basket.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/components/CommentPost']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/components/UserCard']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/components/DiscussionHero']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/DropArea.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Link']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/helpers/avatar']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/helpers/username']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/User.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/CaughtFishModal.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/MovingFish.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addDropAreas.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Page']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/RoundRankings.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/pages/Rankings.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/EditRound.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/NewRoundModal.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/EditRoundModal.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/pages/RoundList.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/EditFish.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/NewFishModal.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/modals/EditFishModal.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/pages/RoundSettings.ts","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addNavLinks.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/components/RoundAlert.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/index.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addModels.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addFishBasket.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addPages.ts","webpack://@clarkwinkelmann/catch-the-fish/./src/forum/addRoundAlert.ts"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_calendar=t()}(this,(function(){\"use strict\";return function(e,t,a){var n=\"h:mm A\",d={lastDay:\"[Yesterday at] \"+n,sameDay:\"[Today at] \"+n,nextDay:\"[Tomorrow at] \"+n,nextWeek:\"dddd [at] \"+n,lastWeek:\"[Last] dddd [at] \"+n,sameElse:\"MM/DD/YYYY\"};t.prototype.calendar=function(e,t){var n=t||this.$locale().calendar||d,o=a(e||void 0).startOf(\"d\"),s=this.diff(o,\"d\",!0),i=\"sameElse\",f=s<-6?i:s<-1?\"lastWeek\":s<0?\"lastDay\":s<1?\"sameDay\":s<2?\"nextDay\":s<7?\"nextWeek\":i,l=n[f]||d[f];return\"function\"==typeof l?l.call(this,a()):this.format(l)}}}));","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Discussion'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Post'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/User'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/models/Forum'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Post from 'flarum/common/models/Post';\nimport Round from './Round';\n\nexport default class Fish extends Model {\n    round_id = Model.attribute('round_id'); // Just for the creation apiEndpoint creation\n    placement = Model.attribute('placement'); // Object\n    name = Model.attribute<string>('name');\n    image_url = Model.attribute<string>('image_url');\n    canSee = Model.attribute<boolean>('canSee');\n    canCatch = Model.attribute<boolean>('canCatch');\n    canName = Model.attribute<boolean>('canName');\n    canPlace = Model.attribute<boolean>('canPlace');\n    placeUntil = Model.attribute('placeUntil');\n    namedBy = Model.hasOne<User>('lastUserNaming');\n    placedBy = Model.hasOne<User>('lastUserPlacement');\n    round = Model.hasOne<Round>('round');\n    placementModel = Model.hasOne<User | Discussion | Post>('placement'); // Only used by the admin panel to show the link to the resource\n\n    apiEndpoint() {\n        return '/catch-the-fish/' + (this.exists ? 'fishes/' + this.data.id : 'rounds/' + this.data.attributes.round_id + '/fishes');\n    }\n}\n","import Model from 'flarum/common/Model';\nimport User from 'flarum/common/models/User';\n\nexport default class Ranking extends Model {\n    catch_count = Model.attribute('catch_count');\n    user: () => User = Model.hasOne('user');\n}\n","import Model from 'flarum/common/Model';\nimport Ranking from './Ranking';\n\nexport default class Round extends Model {\n    name = Model.attribute('name');\n    starts_at = Model.attribute('starts_at');\n    ends_at = Model.attribute('ends_at');\n    include_starting_pack = Model.attribute<boolean>('include_starting_pack');\n    myRanking = Model.hasOne<Ranking>('myRanking');\n\n    apiEndpoint() {\n        return '/catch-the-fish/rounds' + (this.exists ? '/' + this.data.id : '');\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/HeaderPrimary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport extractText from 'flarum/common/utils/extractText';\nimport Fish from '../models/Fish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.fish-image.';\n\ninterface FishImageAttrs {\n    fish: Fish\n    animationDuration?: string\n}\n\nexport default class FishImage implements ClassComponent<FishImageAttrs> {\n    view(vnode: Vnode<FishImageAttrs, this>) {\n        const src = vnode.attrs.fish.image_url();\n\n        if (src) {\n            return m('img.catchthefish-image', {\n                alt: extractText(app.translator.trans(translationPrefix + 'alt', {\n                    name: vnode.attrs.fish.name(),\n                })),\n                src,\n                style: {\n                    animationDuration: vnode.attrs.animationDuration || '10s',\n                },\n                draggable: false, // Without this, browsers somehow drag the image URL across windows instead of the drop data\n            });\n        }\n\n        return m('.catchthefish-no-image', app.translator.trans(translationPrefix + 'missing'));\n    }\n}\n","import {ClassComponent} from 'mithril';\nimport app from 'flarum/forum/app';\nimport User from 'flarum/common/models/User';\nimport FishImage from './FishImage';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.basket.';\n\nexport default class Basket implements ClassComponent {\n    view() {\n        if (!app.session.user) {\n            return m('div');\n        }\n\n        const basket = (app.session.user as User).catchTheFishBasket();\n\n        if (!basket) {\n            return m('div');\n        }\n\n        const fishesThatCanBePlaced = basket.filter(fish => fish.canPlace());\n\n        if (fishesThatCanBePlaced.length === 0) {\n            return m('div');\n        }\n\n        return m('.catchthefish-basket', [\n            m('.catchthefish-basket-title', app.translator.trans(translationPrefix + 'title')),\n            m('p', app.translator.trans(translationPrefix + 'drag-help')),\n            fishesThatCanBePlaced.map(fish => m('.catchthefish-basket-entry', [\n                m('.catchthefish-basket-fish', {\n                    draggable: true,\n                    ondragstart(event: DragEvent) {\n                        if (!event.dataTransfer) {\n                            return;\n                        }\n\n                        // Used for internal drag and drop animation\n                        app.draggedFishId = fish.id();\n\n                        // Used for cross-window drag and drop\n                        // Chrome doesn't allow reading this value in ondragover so we can't show a drop area in that situation\n                        // (we would have to show a drop area for all text drops, which is too broad)\n                        event.dataTransfer.setData('text/plain', 'fish:' + fish.id());\n                    },\n                }, m(FishImage, {\n                    fish,\n                })),\n                m('.catchthefish-basket-time', app.translator.trans(translationPrefix + 'time', {\n                    time: dayjs(fish.placeUntil()).fromNow(),\n                })),\n            ])),\n        ]);\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/CommentPost'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserCard'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionHero'];","import {ClassComponent} from 'mithril';\nimport app from 'flarum/forum/app';\n\nexport default class DropArea implements ClassComponent {\n    view() {\n        return m('.catchthefish-drop-area', app.translator.trans('clarkwinkelmann-catch-the-fish.forum.drop-area.message'));\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/classList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/avatar'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/username'];","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport avatar from 'flarum/common/helpers/avatar';\nimport username from 'flarum/common/helpers/username';\nimport UserModel from 'flarum/common/models/User';\n\ninterface UserAttrs {\n    user: UserModel\n}\n\nexport default class User implements ClassComponent<UserAttrs> {\n    view(vnode: Vnode<UserAttrs, this>) {\n        const {user} = vnode.attrs;\n\n        return m(Link, {\n            href: app.route.user(user),\n        }, [\n            avatar(user),\n            ' ',\n            username(user),\n        ]);\n    }\n}\n","import {Vnode} from 'mithril'\nimport app from 'flarum/forum/app';\nimport Modal, {IInternalModalAttrs} from 'flarum/common/components/Modal';\nimport Button from 'flarum/common/components/Button';\nimport FishImage from '../components/FishImage';\nimport User from '../components/User';\nimport Fish from '../models/Fish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.caught-fish-modal.';\n\ninterface CaughtFishModalAttrs extends IInternalModalAttrs {\n    fish: Fish\n}\n\nexport default class CaughtFishModal extends Modal<CaughtFishModalAttrs> {\n    newName!: string\n    dirty: boolean = false\n    loading: boolean = false\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.newName = this.attrs.fish.name();\n    }\n\n    className() {\n        return 'Modal--small catchthefish-catch-modal';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    saveNameAndPlacement(randomPlacement = false) {\n        const body: any = {};\n\n        if (this.dirty) {\n            body.name = this.newName;\n        }\n\n        if (randomPlacement) {\n            body.placement = 'random';\n        }\n\n        if (body) {\n            this.loading = true;\n\n            app.request({\n                method: 'POST',\n                url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + this.attrs.fish.id() + '/place',\n                body,\n            }).then(result => {\n                app.store.pushPayload(result);\n                this.hide();\n\n                if (this.attrs.fish.canPlace() && !randomPlacement) {\n                    // Refresh basket by reloading user\n                    app.store.find('users', app.session.user!.id()!).then(() => {\n                        m.redraw();\n                    });\n                }\n            }).catch(err => {\n                this.loading = false;\n                m.redraw();\n                throw err;\n            });\n        } else {\n            this.hide();\n\n            if (this.attrs.fish.canPlace() && !randomPlacement) {\n                // Refresh basket by reloading user\n                app.store.find('users', app.session.user!.id()!).then(() => {\n                    m.redraw();\n                });\n            }\n        }\n    }\n\n    content() {\n        const {fish} = this.attrs;\n\n        const namedBy = fish.namedBy();\n        const placedBy = fish.placedBy();\n\n        return m('.Modal-body', [\n            m('h3', '\"' + fish.name() + '\"'),\n            m(FishImage, {\n                fish,\n            }),\n            namedBy ? m('p', [\n                app.translator.trans(translationPrefix + 'named-by'),\n                ' ',\n                m(User, {\n                    user: namedBy,\n                }),\n            ]) : null,\n            placedBy ? m('p', [\n                app.translator.trans(translationPrefix + 'placed-by'),\n                ' ',\n                m(User, {\n                    user: placedBy,\n                }),\n            ]) : null,\n            m('p', app.translator.trans(translationPrefix + 'congratulation', {\n                catch_count: fish.round()!.myRanking()?.catch_count(),\n            })),\n            fish.canName() ? m('.Form-group', [\n                m('p', app.translator.trans(translationPrefix + 'name-help')),\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.newName,\n                    oninput: (event: Event) => {\n                        this.newName = (event.target as HTMLInputElement).value;\n                        this.dirty = true;\n                    },\n                }),\n            ]) : null,\n            fish.canPlace() ? m('p', app.translator.trans(translationPrefix + 'placement-help')) : null,\n            m('.Form-group', Button.component({\n                className: 'Button Button--primary Button--block',\n                type: 'button',\n                loading: this.loading,\n                onclick: () => {\n                    this.saveNameAndPlacement();\n                },\n            }, app.translator.trans(translationPrefix + (this.dirty ? (fish.canPlace() ? 'submit-name-place-later' : 'submit-name') : (fish.canPlace() ? 'submit-place-later' : 'submit-continue'))))),\n            fish.canPlace() ? m('.Form-group', Button.component({\n                className: 'Button Button--primary Button--block',\n                type: 'button',\n                loading: this.loading,\n                onclick: () => {\n                    this.saveNameAndPlacement(true);\n                },\n            }, app.translator.trans(translationPrefix + (this.dirty ? 'submit-name-place-random' : 'submit-place-random')))) : null,\n        ]);\n    }\n\n    onsubmit(event: Event) {\n        event.preventDefault();\n        // Because the modal has its own form, pressing enter will submit here\n        // In this case we apply the same feature as the first button\n        this.saveNameAndPlacement();\n    }\n}\n","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport classList from 'flarum/common/utils/classList';\nimport FishImage from './FishImage';\nimport CaughtFishModal from '../modals/CaughtFishModal';\nimport Fish from '../models/Fish';\n\ninterface MovingFishAttrs {\n    fish: Fish\n    oncatch?: () => void\n}\n\nexport default class MovingFish implements ClassComponent<MovingFishAttrs> {\n    reverseAnimation!: boolean\n    animationDuration!: string\n\n    oninit() {\n        this.reverseAnimation = Math.random() > 0.5;\n        this.animationDuration = 5 + (Math.floor(Math.random() * 70) / 10) + 's';\n    }\n\n    view(vnode: Vnode<MovingFishAttrs, this>) {\n        const {fish} = vnode.attrs;\n\n        return m('.catchthefish-moving-fish', {\n            className: classList({\n                'catchthefish-animate-flip': app.forum.catchTheFishAnimateFlip(),\n                'catchthefish-animate-reverse': this.reverseAnimation,\n            }),\n            style: {\n                animationDuration: this.animationDuration,\n            },\n            onclick: () => {\n                if (!fish.canCatch() && !app.session.user) {\n                    alert(app.translator.trans('clarkwinkelmann-catch-the-fish.forum.moving-fish.login'));\n                    return;\n                }\n\n                app.request({\n                    method: 'POST',\n                    url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + fish.id() + '/catch',\n                    body: fish.placement(),\n                }).then(result => {\n                    app.modal.show(CaughtFishModal, {\n                        fish: app.store.pushPayload(result),\n                    });\n\n                    // So the parent can remove the fish from the relationship\n                    if (vnode.attrs.oncatch) {\n                        vnode.attrs.oncatch();\n                    }\n                });\n            },\n        }, [\n            m('.catchthefish-name', fish.name()),\n            m(FishImage, {\n                fish,\n                animationDuration: this.animationDuration,\n            }),\n        ]);\n    }\n}\n","import {extend, override} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport SubtreeRetainer from 'flarum/common/utils/SubtreeRetainer';\nimport CommentPost from 'flarum/forum/components/CommentPost';\nimport UserCard from 'flarum/forum/components/UserCard';\nimport DiscussionHero from 'flarum/forum/components/DiscussionHero';\nimport DropArea from './components/DropArea';\nimport MovingFish from './components/MovingFish';\n\ninterface DragOverComponent {\n    fishDragOver: boolean\n    subtree?: SubtreeRetainer\n    attrs?: any\n}\n\nfunction fishIdFromEvent(event: DragEvent): string | null {\n    if (!event.dataTransfer) {\n        return null;\n    }\n\n    const data = event.dataTransfer.getData(\"text/plain\");\n\n    const match = /^fish:([0-9]+)$/.exec(data);\n\n    return match ? match[1] : null;\n}\n\nfunction movingFishContent(dragover: boolean, model: any) {\n    const content = [];\n\n    if (dragover) {\n        content.push(m(DropArea));\n    }\n\n    const fishes = model.catchTheFishFishes();\n\n    if (fishes) {\n        fishes.forEach(fish => {\n            if (!fish.canSee()) {\n                return;\n            }\n\n            // Remove fish from relationship\n            content.push(m(MovingFish, {\n                fish,\n                oncatch: () => {\n                    model.pushData({\n                        relationships: {\n                            catchTheFishFishes: {\n                                data: model.data.relationships.catchTheFishFishes.data.filter(f => f.id !== fish.id()),\n                            },\n                        },\n                    });\n                },\n            }));\n        });\n    }\n\n    return content;\n}\n\nfunction addDropAttrs(this: DragOverComponent, attrs: any, modelProperty: string) {\n    attrs.ondrop = (event: DragEvent) => {\n        this.fishDragOver = false;\n\n        const fishId = app.draggedFishId || fishIdFromEvent(event);\n\n        if (fishId) {\n            event.preventDefault();\n\n            const fish = app.store.getById('catchthefish-fishes', fishId);\n\n            if (fish) {\n                const placement: any = {};\n                placement[modelProperty + '_id'] = this.attrs[modelProperty].id();\n\n                app.request({\n                    method: 'POST',\n                    url: app.forum.attribute('apiUrl') + '/catch-the-fish/fishes/' + fish.id() + '/place',\n                    body: {\n                        placement,\n                    },\n                }).then(result => {\n                    app.store.pushPayload(result);\n\n                    // Refresh basket by reloading user\n                    app.store.find('users', app.session.user.id()).then(() => {\n                        m.redraw();\n                    });\n                });\n            } else {\n                alert(app.translator.trans('clarkwinkelmann-catch-the-fish.forum.drop-area.missing-from-store'));\n            }\n        }\n    };\n    attrs.ondragover = (event: DragEvent) => {\n        if (app.draggedFishId || fishIdFromEvent(event)) {\n            event.preventDefault();\n            event.dataTransfer!.dropEffect = 'move';\n\n            if (this.fishDragOver) {\n                event.redraw = false;\n            } else {\n                this.fishDragOver = true;\n                m.redraw();\n            }\n        } else {\n            // In order to still support drag and drop across windows, we will accept any text drops\n            // This is necessary because browsers don't give access to the drop value until the actual drop\n            // But if we don't call preventDefault() here the drop can't happen in the first place\n            if (event.dataTransfer && event.dataTransfer.types.includes('text/plain')) {\n                event.preventDefault();\n            }\n\n            event.redraw = false;\n        }\n    };\n    attrs.ondragenter = (event: DragEvent) => {\n        event.preventDefault();\n        event.redraw = false;\n    };\n    attrs.ondragleave = (event: DragEvent) => {\n        if (this.fishDragOver) {\n            this.fishDragOver = false;\n            m.redraw();\n        } else {\n            event.redraw = false;\n        }\n    };\n}\n\nfunction addAreaToComponent(component: DragOverComponent, viewName: string, modelProperty: string) {\n    if (viewName === 'content') {\n        override(component, viewName, function (original: any) {\n            return original().concat(movingFishContent(this.fishDragOver, this.attrs[modelProperty]));\n        });\n    } else {\n        extend(component, viewName, function (items: ItemList<any>) {\n            items.add('catchthefish-fish-and-drop', movingFishContent(this.fishDragOver, this.attrs[modelProperty]));\n        });\n    }\n\n    extend(component, 'oninit', function () {\n        this.fishDragOver = false;\n\n        // Add a condition to the post tree retainer\n        if (this.subtree) {\n            this.subtree.check(() => this.fishDragOver);\n        }\n    });\n\n    if (viewName === 'content') {\n        // CommentPost has an attrs() method we can extend\n        extend(component, 'elementAttrs', function (attrs) {\n            addDropAttrs.bind(this)(attrs, modelProperty);\n        });\n    } else {\n        // For other elements we manually add attrs to the vdom of the view\n        extend(component, 'view', function (vdom) {\n            vdom.attrs = vdom.attrs || {};\n            addDropAttrs.bind(this)(vdom.attrs, modelProperty);\n        });\n    }\n}\n\nexport default function () {\n    addAreaToComponent(CommentPost.prototype as any, 'content', 'post');\n    addAreaToComponent(UserCard.prototype as any, 'infoItems', 'user');\n    addAreaToComponent(DiscussionHero.prototype as any, 'items', 'discussion');\n\n    document.addEventListener('dragend', () => {\n        app.draggedFishId = null;\n    });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Page'];","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport User from './User';\nimport Ranking from '../models/Ranking';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.table-ranking.';\n\ninterface RoundRankingsAttrs {\n    round: Round\n}\n\nexport default class RoundRankings implements ClassComponent<RoundRankingsAttrs> {\n    rankings: Ranking[] | null = null;\n\n    oninit(vnode: Vnode<RoundRankingsAttrs, this>) {\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/rounds/' + vnode.attrs.round.id() + '/rankings',\n        }).then(result => {\n            this.rankings = app.store.pushPayload(result);\n            m.redraw();\n        });\n    }\n\n    view(vnode: Vnode<RoundRankingsAttrs, this>) {\n        if (this.rankings === null) {\n            return m('p', app.translator.trans(translationPrefix + 'loading'));\n        }\n\n        return m('div', [\n            m('h2', app.translator.trans(translationPrefix + 'title', {\n                name: vnode.attrs.round.name(),\n            })),\n            m('table.catchthefish-table', [\n                m('thead', m('tr', [\n                    m('th', app.translator.trans(translationPrefix + 'rank')),\n                    m('th', app.translator.trans(translationPrefix + 'count')),\n                    m('th', app.translator.trans(translationPrefix + 'user')),\n                ])),\n                m('tbody', this.rankings.map((ranking, index) => m('tr', [\n                    m('td', '#' + (index + 1)),\n                    m('td', ranking.catch_count()),\n                    m('td', m(User, {\n                        user: ranking.user(),\n                    })),\n                ]))),\n            ]),\n        ]);\n    }\n}\n","import app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport RoundRankings from \"../components/RoundRankings\";\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.page-ranking.';\n\nexport default class Rankings extends Page {\n    view() {\n        if (!app.forum.catchTheFishCanSeeRankingsPage()) {\n            return m('.container', m('p', app.translator.trans(translationPrefix + 'permission')));\n        }\n\n        const rounds = app.forum.catchTheFishActiveRounds();\n\n        return m('.container', [\n            m('h2', app.translator.trans(translationPrefix + 'title')),\n            rounds ? rounds.map(round => m(RoundRankings, {\n                round,\n            })) : m('p', app.translator.trans(translationPrefix + 'nothing')),\n        ]);\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport Switch from 'flarum/common/components/Switch';\nimport extractText from 'flarum/common/utils/extractText';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-round.';\n\ninterface EditRoundAttrs {\n    round?: Round\n    onsave?: () => void\n    ondelete?: () => void\n}\n\nexport default class EditRound implements ClassComponent<EditRoundAttrs> {\n    round!: Round\n    dirty: boolean = false\n    processing: boolean = false\n\n    oninit(vnode: Vnode<EditRoundAttrs, this>) {\n        let {round} = vnode.attrs;\n\n        if (typeof round === 'undefined') {\n            round = app.store.createRecord('catchthefish-rounds', {\n                attributes: {\n                    name: '',\n                    starts_at: '',\n                    ends_at: dayjs().add(1, 'day').toISOString(),\n                    include_starting_pack: true,\n                },\n            }) as Round;\n        }\n\n        this.round = round;\n    }\n\n    view(vnode: Vnode<EditRoundAttrs, this>) {\n        return m('form', {\n            onsubmit: (event: Event) => {\n                event.preventDefault();\n                this.saveRecord(vnode);\n            },\n        }, [\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.round.name(),\n                    oninput: withAttr('value', this.updateAttribute.bind(this, 'name')),\n                }),\n                m('.helpText', app.translator.trans(translationPrefix + 'name-help')),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'starts-at')),\n                m('input.FormControl', {\n                    value: this.round.starts_at(),\n                    oninput: withAttr('value', this.updateAttribute.bind(this, 'starts_at')),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'ends-at')),\n                m('input.FormControl', {\n                    value: this.round.ends_at(),\n                    oninput: withAttr('value', this.updateAttribute.bind(this, 'ends_at')),\n                }),\n            ]),\n            this.round.exists ? '' : m('.Form-group', [\n                m('label', [\n                    Switch.component({\n                        state: this.round.include_starting_pack(),\n                        onchange: this.updateAttribute.bind(this, 'include_starting_pack'),\n                    }, app.translator.trans(translationPrefix + 'starting-pack')),\n                ]),\n                m('.helpText', app.translator.trans(translationPrefix + 'starting-pack-help')),\n            ]),\n            m('.ButtonGroup', [\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    loading: this.processing,\n                    disabled: !this.readyToSave(),\n                }, app.translator.trans(translationPrefix + (this.round.exists ? 'save' : 'create'))),\n                (this.round.exists ? Button.component({\n                    type: 'button',\n                    className: 'Button Button--danger',\n                    loading: this.processing,\n                    onclick: () => {\n                        this.deleteRecord(vnode);\n                    },\n                }, app.translator.trans(translationPrefix + 'delete')) : ''),\n            ]),\n        ]);\n    }\n\n    updateAttribute(attribute: string, value: any) {\n        this.round.pushAttributes({\n            [attribute]: value,\n        });\n\n        this.dirty = true;\n    }\n\n    readyToSave() {\n        if (!this.round.name()) {\n            return false;\n        }\n\n        return this.dirty;\n    }\n\n    saveRecord(vnode: Vnode<EditRoundAttrs, this>) {\n        this.processing = true;\n\n        this.round.save(this.round.data.attributes).then(() => {\n            if (vnode.attrs.onsave) {\n                vnode.attrs.onsave();\n            }\n\n            this.processing = false;\n            this.dirty = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n\n    deleteRecord(vnode: Vnode<EditRoundAttrs, this>) {\n        if (!confirm(extractText(app.translator.trans(translationPrefix + 'delete-confirmation', {\n            name: this.round.name(),\n        })))) {\n            return;\n        }\n\n        this.processing = true;\n\n        this.round.delete().then(() => {\n            if (vnode.attrs.ondelete) {\n                vnode.attrs.ondelete();\n            }\n\n            this.processing = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport EditRound from '../components/EditRound';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.new-round-modal.';\n\nexport default class NewRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    content() {\n        return m('.Modal-body', m(EditRound, {\n            onsave: () => {\n                this.hide();\n\n                if (this.attrs.oncreateordelete) {\n                    this.attrs.oncreateordelete();\n                }\n            },\n        }));\n    }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport EditRound from '../components/EditRound';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-round-modal.';\n\nexport default class EditRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title', {\n            name: this.attrs.round.name(),\n        });\n    }\n\n    content() {\n        return m('.Modal-body', m(EditRound, {\n            round: this.attrs.round,\n            ondelete: () => {\n                this.hide();\n\n                if (this.attrs.oncreateordelete) {\n                    this.attrs.oncreateordelete();\n                }\n            },\n        }));\n    }\n}\n","import {Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Page from 'flarum/common/components/Page';\nimport Button from 'flarum/common/components/Button';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport NewRoundModal from '../modals/NewRoundModal';\nimport EditRoundModal from '../modals/EditRoundModal';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.table-round.';\n\nexport default class RoundList extends Page {\n    rounds: Round[] | null = null\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.refreshRounds();\n    }\n\n    refreshRounds() {\n        this.rounds = null;\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/rounds',\n        }).then(result => {\n            this.rounds = app.store.pushPayload(result);\n            m.redraw();\n        });\n    }\n\n    view() {\n        if (this.rounds === null) {\n            return m('.container', m('p', app.translator.trans(translationPrefix + 'loading')));\n        }\n\n        return m('.container', [\n            m('h2', app.translator.trans(translationPrefix + 'title')),\n            Button.component({\n                className: 'Button Button--primary',\n                onclick: () => {\n                    app.modal.show(NewRoundModal, {\n                        oncreateordelete: () => {\n                            this.refreshRounds();\n                        },\n                    });\n                },\n            }, app.translator.trans(translationPrefix + 'new')),\n            m('table.catchthefish-table', [\n                m('thead', m('tr', [\n                    m('th', app.translator.trans(translationPrefix + 'name')),\n                    m('th', app.translator.trans(translationPrefix + 'start')),\n                    m('th', app.translator.trans(translationPrefix + 'end')),\n                    m('th', app.translator.trans(translationPrefix + 'actions')),\n                ])),\n                m('tbody', this.rounds.map(round => m('tr', [\n                    m('td', round.name()),\n                    m('td', round.starts_at()),\n                    m('td', round.ends_at()),\n                    m('td', [\n                        Button.component({\n                            className: 'Button',\n                            onclick: () => {\n                                app.modal.show(EditRoundModal, {\n                                    round,\n                                    oncreateordelete: () => {\n                                        this.refreshRounds();\n                                    },\n                                });\n                            },\n                        }, app.translator.trans(translationPrefix + 'edit')),\n                        ' ',\n                        LinkButton.component({\n                            className: 'Button',\n                            href: app.route('catchTheFishRound', {\n                                id: round.id(),\n                            }),\n                        }, app.translator.trans(translationPrefix + 'fishes')),\n                    ]),\n                ]))),\n            ]),\n        ]);\n    }\n}\n","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Button from 'flarum/common/components/Button';\nimport extractText from 'flarum/common/utils/extractText';\nimport Fish from '../models/Fish';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-fish.';\n\ninterface EditFishAttrs {\n    fish?: Fish\n    round: Round\n    onsave?: () => void\n    ondelete?: () => void\n}\n\nexport default class EditFish implements ClassComponent<EditFishAttrs> {\n    fish!: Fish\n    dirty: boolean = false\n    processing: boolean = false\n\n    oninit(vnode: Vnode<EditFishAttrs, this>) {\n        let {fish} = vnode.attrs;\n        if (typeof fish === 'undefined') {\n            fish = app.store.createRecord('catchthefish-fishes', {\n                attributes: {\n                    round_id: vnode.attrs.round.id(),\n                    name: '',\n                },\n            }) as Fish;\n        }\n\n        this.fish = fish;\n    }\n\n    view(vnode: Vnode<EditFishAttrs, this>) {\n        return m('form', {\n            onsubmit: (event: Event) => {\n                event.preventDefault();\n                this.saveRecord(vnode);\n            },\n        }, [\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'name')),\n                m('input.FormControl', {\n                    value: this.fish.name(),\n                    oninput: (event: Event) => {\n                        this.fish.pushAttributes({\n                            name: (event.target as HTMLInputElement).value,\n                        });\n\n                        this.dirty = true;\n                    },\n                }),\n                m('.helpText', app.translator.trans(translationPrefix + 'name-help')),\n            ]),\n            m('.ButtonGroup', [\n                Button.component({\n                    type: 'submit',\n                    className: 'Button Button--primary',\n                    loading: this.processing,\n                    disabled: !this.readyToSave(),\n                }, app.translator.trans(translationPrefix + (this.fish.exists ? 'save' : 'create'))),\n                (this.fish.exists ? Button.component({\n                    type: 'button',\n                    className: 'Button Button--danger',\n                    loading: this.processing,\n                    onclick: () => {\n                        this.deleteRecord(vnode);\n                    },\n                }, app.translator.trans(translationPrefix + 'delete')) : ''),\n            ]),\n        ]);\n    }\n\n    readyToSave() {\n        if (!this.fish.name()) {\n            return false;\n        }\n\n        return this.dirty;\n    }\n\n    saveRecord(vnode: Vnode<EditFishAttrs, this>) {\n        this.processing = true;\n\n        this.fish.save(this.fish.data.attributes).then(() => {\n            if (vnode.attrs.onsave) {\n                vnode.attrs.onsave();\n            }\n\n            this.processing = false;\n            this.dirty = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n\n    deleteRecord(vnode: Vnode<EditFishAttrs, this>) {\n        if (!confirm(extractText(app.translator.trans(translationPrefix + 'delete-confirmation', {\n            name: this.fish.name(),\n        })))) {\n            return;\n        }\n\n        this.processing = true;\n\n        this.fish.delete().then(() => {\n            if (vnode.attrs.ondelete) {\n                vnode.attrs.ondelete();\n            }\n\n            this.processing = false;\n            m.redraw();\n        }).catch(err => {\n            this.processing = false;\n            m.redraw();\n            throw err;\n        });\n    }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport EditFish from '../components/EditFish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.new-fish-modal.';\n\nexport default class NewFishModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title');\n    }\n\n    content() {\n        return m('.Modal-body', m(EditFish, {\n            round: this.attrs.round,\n            onsave: () => {\n                this.hide();\n\n                if (this.attrs.oncreateordelete) {\n                    this.attrs.oncreateordelete();\n                }\n            },\n        }));\n    }\n}\n","import app from 'flarum/forum/app';\nimport Modal from 'flarum/common/components/Modal';\nimport EditFish from '../components/EditFish';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.edit-fish-modal.';\n\nexport default class EditRoundModal extends Modal {\n    className() {\n        return 'Modal--small';\n    }\n\n    title() {\n        return app.translator.trans(translationPrefix + 'title', {\n            name: this.attrs.fish.name(),\n        });\n    }\n\n    content() {\n        return m('.Modal-body', m(EditFish, {\n            fish: this.attrs.fish,\n            ondelete: () => {\n                this.hide();\n\n                if (this.attrs.oncreateordelete) {\n                    this.attrs.oncreateordelete();\n                }\n            },\n        }));\n    }\n}\n","import {Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport Link from 'flarum/common/components/Link';\nimport Page from 'flarum/common/components/Page';\nimport Button from 'flarum/common/components/Button';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Post from 'flarum/common/models/Post';\nimport UserModel from 'flarum/common/models/User';\nimport NewFishModal from '../modals/NewFishModal';\nimport EditFishModal from '../modals/EditFishModal';\nimport FishImage from '../components/FishImage';\nimport User from '../components/User';\nimport Fish from '../models/Fish';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.table-fish.';\n\nexport default class RoundSettings extends Page {\n    roundId!: string\n    round: Round | null = null\n    fishes: Fish[] | null = null\n    uploading: boolean = false\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        this.roundId = m.route.param('id');\n        this.round = app.store.getById('catchthefish-round', this.roundId);\n\n        if (!this.round) {\n            app.store.find('catch-the-fish/rounds', this.roundId).then(round => {\n                this.round = round;\n                m.redraw();\n            });\n        }\n\n        this.refreshFishes();\n    }\n\n    refreshFishes() {\n        this.fishes = null;\n\n        app.request({\n            method: 'GET',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/rounds/' + this.roundId + '/fishes',\n        }).then(result => {\n            this.fishes = app.store.pushPayload(result);\n            m.redraw();\n        });\n    }\n\n    // Based on Flarum's AvatarEditor component\n    openPicker(callback: (files: FileList) => void, multiple = false) {\n        if (this.uploading) return;\n\n        const $input = $('<input type=\"file\">');\n        // @ts-ignore should the variable be cast to string?\n        $input.attr('multiple', multiple);\n        $input.appendTo('body').hide().click().on('change', event => {\n            callback((event.target as HTMLInputElement).files as FileList);\n        });\n    }\n\n    uploadImages(images: FileList, fish?: Fish) {\n        const body = new FormData();\n\n        if (fish) {\n            body.append('image', images[0]);\n        } else {\n            for (let i = 0; i < images.length; i++) {\n                body.append('image' + i, images[i]);\n            }\n        }\n\n        this.uploading = true;\n        m.redraw();\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/catch-the-fish/' + (fish ? 'fishes/' + fish.id() + '/image' : 'rounds/' + this.roundId + '/fishes-from-images'),\n            serialize: (raw: any) => raw,\n            body,\n        }).then(() => {\n            this.uploading = false;\n            m.redraw();\n            this.refreshFishes();\n        }).catch(err => {\n            this.uploading = false;\n            m.redraw();\n            throw err;\n        });\n    }\n\n    view() {\n        if (!this.round || this.fishes === null) {\n            return m('.container', m('p', app.translator.trans(translationPrefix + 'loading')));\n        }\n\n        return m('.container', [\n            m('h2', app.translator.trans(translationPrefix + 'title', {\n                name: this.round.name(),\n            })),\n            Button.component({\n                className: 'Button Button--primary',\n                onclick: () => {\n                    app.modal.show(NewFishModal, {\n                        round: this.round,\n                        oncreateordelete: () => {\n                            this.refreshFishes();\n                        },\n                    });\n                },\n            }, app.translator.trans(translationPrefix + 'new')),\n            ' ',\n            Button.component({\n                className: 'Button',\n                type: 'button',\n                onclick: () => {\n                    this.openPicker(files => {\n                        this.uploadImages(files);\n                    }, true);\n                },\n                loading: this.uploading,\n            }, app.translator.trans(translationPrefix + 'new-from-image')),\n            m('table.catchthefish-table', [\n                m('thead', m('tr', [\n                    m('th', app.translator.trans(translationPrefix + 'image')),\n                    m('th', app.translator.trans(translationPrefix + 'name')),\n                    m('th', app.translator.trans(translationPrefix + 'user-name')),\n                    m('th', app.translator.trans(translationPrefix + 'user-place')),\n                    m('th', app.translator.trans(translationPrefix + 'placement')),\n                    m('th', app.translator.trans(translationPrefix + 'actions')),\n                ])),\n                m('tbody', this.fishes.length === 0 ? m('tr', [\n                    m('td', 'No fishes'),\n                ]) : this.fishes.map(fish => {\n                    const namedBy = fish.namedBy();\n                    const placedBy = fish.placedBy();\n\n                    return m('tr', [\n                        m('td', m(FishImage, {\n                            fish,\n                        })),\n                        m('td', fish.name()),\n                        m('td', namedBy ? m(User, {\n                            user: namedBy,\n                        }) : m('em', app.translator.trans(translationPrefix + 'no-user-name'))),\n                        m('td', placedBy ? m(User, {\n                            user: placedBy,\n                        }) : m('em', app.translator.trans(translationPrefix + 'no-user-place'))),\n                        m('td', this.placement(fish)),\n                        m('td', [\n                            Button.component({\n                                className: 'Button',\n                                onclick: () => {\n                                    app.modal.show(EditFishModal, {\n                                        fish,\n                                        oncreateordelete: () => {\n                                            this.refreshFishes();\n                                        },\n                                    });\n                                },\n                            }, app.translator.trans(translationPrefix + 'edit')),\n                            ' ',\n                            Button.component({\n                                className: 'Button',\n                                type: 'button',\n                                onclick: () => {\n                                    this.openPicker(files => {\n                                        this.uploadImages(files, fish);\n                                    });\n                                },\n                                loading: this.uploading,\n                            }, app.translator.trans(translationPrefix + 'upload')),\n                        ]),\n                    ]);\n                })),\n            ]),\n        ]);\n    }\n\n    placement(fish: Fish): any {\n        const placement = fish.placementModel();\n\n        if (placement instanceof Discussion) {\n            return m(Link, {\n                href: app.route.discussion(placement),\n            }, placement.title());\n        }\n\n        if (placement instanceof Post) {\n            const discussion = placement.discussion();\n\n            return m(Link, {\n                href: app.route.post(placement),\n            }, (discussion ? discussion.title() : '') + ' #' + placement.number());\n        }\n\n        if (placement instanceof UserModel) {\n            return m(User, {\n                user: placement,\n            });\n        }\n\n        return 'N/A';\n    }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/IndexPage'];","import {extend} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.nav.';\n\nexport default function () {\n    extend(IndexPage.prototype, 'navItems', function (items: ItemList) {\n        if (app.forum.catchTheFishCanSeeRankingsPage()) {\n            items.add('catchthefish-rankings', LinkButton.component({\n                icon: 'fas fa-fish',\n                href: app.route('catchTheFishRankings'),\n            }, app.translator.trans(translationPrefix + 'rankings')));\n        }\n\n        if (app.forum.catchTheFishCanModerate()) {\n            items.add('catchthefish-settings', LinkButton.component({\n                icon: 'fas fa-fish',\n                href: app.route('catchTheFishRounds'),\n            }, app.translator.trans(translationPrefix + 'settings')));\n        }\n    });\n}\n","import {ClassComponent, Vnode} from 'mithril';\nimport app from 'flarum/forum/app';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport Round from '../models/Round';\n\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.forum.round-alert.';\n\ninterface UpdateAlertAttrs {\n    round: Round\n}\n\nexport default class UpdateAlert implements ClassComponent<UpdateAlertAttrs> {\n    view(vnode: Vnode<UpdateAlertAttrs, this>) {\n        return m('.Alert.Alert-info', m('.container', [\n            m('span.Alert-body', [\n                app.translator.trans(translationPrefix + 'message', {\n                    name: vnode.attrs.round.name(),\n                    time: dayjs(vnode.attrs.round.ends_at()).calendar(),\n                }),\n            ]),\n            app.forum.catchTheFishCanSeeRankingsPage() ? m('ul.Alert-controls', m('li', LinkButton.component({\n                href: app.route('catchTheFishRankings'),\n            }, app.translator.trans(translationPrefix + 'rankings')))) : null,\n        ]));\n    }\n}\n","import app from 'flarum/forum/app';\nimport addModels from './addModels';\nimport addFishBasket from './addFishBasket';\nimport addDropAreas from './addDropAreas';\nimport addPages from './addPages';\nimport addNavLinks from './addNavLinks';\nimport addRoundAlert from './addRoundAlert';\nimport calendar from 'dayjs/plugin/calendar';\n\n// Import calendar plugin for Day.js\ndayjs.extend(calendar)\n\napp.initializers.add('clarkwinkelmann-catch-the-fish', () => {\n    addModels();\n    addFishBasket();\n    addDropAreas();\n    addPages();\n    addNavLinks();\n    addRoundAlert();\n});\n","import app from 'flarum/forum/app';\nimport Model from 'flarum/common/Model';\nimport Discussion from 'flarum/common/models/Discussion';\nimport Post from 'flarum/common/models/Post';\nimport User from 'flarum/common/models/User';\nimport Forum from 'flarum/common/models/Forum';\nimport Fish from './models/Fish';\nimport Ranking from './models/Ranking';\nimport Round from './models/Round';\n\nexport default function () {\n    app.store.models['catchthefish-fishes'] = Fish;\n    app.store.models['catchthefish-rankings'] = Ranking;\n    app.store.models['catchthefish-rounds'] = Round;\n\n    Discussion.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    Post.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    User.prototype.catchTheFishFishes = Model.hasMany('catchTheFishFishes');\n    User.prototype.catchTheFishBasket = Model.hasMany('catchTheFishBasket');\n    Forum.prototype.catchTheFishActiveRounds = Model.hasMany('catchTheFishActiveRounds');\n    Forum.prototype.catchTheFishCanModerate = Model.attribute('catchTheFishCanModerate');\n    Forum.prototype.catchTheFishCanSeeRankingsPage = Model.attribute('catchTheFishCanSeeRankingsPage');\n    Forum.prototype.catchTheFishAnimateFlip = Model.attribute('catchTheFishAnimateFlip');\n}\n","import {extend} from 'flarum/common/extend';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport HeaderPrimary from 'flarum/forum/components/HeaderPrimary';\nimport Basket from './components/Basket';\n\nexport default function () {\n    extend(HeaderPrimary.prototype, 'items', function (items: ItemList) {\n        items.add('catchthefish-basket', m(Basket));\n    });\n}\n","import app from 'flarum/forum/app';\nimport Rankings from \"./pages/Rankings\";\nimport RoundList from './pages/RoundList';\nimport RoundSettings from './pages/RoundSettings';\n\nexport default function () {\n    app.routes.catchTheFishRankings = {\n        path: '/catch-the-fish',\n        component: Rankings,\n    };\n\n    app.routes.catchTheFishRounds = {\n        path: '/catch-the-fish/rounds',\n        component: RoundList,\n    };\n\n    app.routes.catchTheFishRound = {\n        path: '/catch-the-fish/rounds/:id',\n        component: RoundSettings,\n    };\n}\n","import {override} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport RoundAlert from './components/RoundAlert';\n\nexport default function () {\n    override(IndexPage.prototype, 'hero', function (original: any) {\n        const existing = original();\n\n        if (!app.forum.attribute('catchTheFishAlertRound')) {\n            return existing;\n        }\n\n        const rounds = app.forum.catchTheFishActiveRounds();\n\n        if (!rounds) {\n            return existing;\n        }\n\n        // Replace missing rounds with null. Happens if you delete a round and go back to homepage\n        const additional = rounds.map(round => round ? m(RoundAlert, {\n            round,\n        }) : null);\n\n        if (Array.isArray(existing)) {\n            return rounds.concat(existing);\n        }\n\n        return m('div', [\n            additional,\n            existing,\n        ]);\n    });\n}\n"],"names":["module","exports","e","t","a","n","d","lastDay","sameDay","nextDay","nextWeek","lastWeek","sameElse","prototype","calendar","this","$locale","o","startOf","s","diff","i","f","l","call","format","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","key","Object","defineProperty","enumerable","get","obj","prop","hasOwnProperty","r","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Fish","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","round_id","Model","placement","name","image_url","canSee","canCatch","canName","canPlace","placeUntil","namedBy","placedBy","round","placementModel","apiEndpoint","exists","data","id","attributes","Ranking","catch_count","user","Round","starts_at","ends_at","include_starting_pack","myRanking","translationPrefix","FishImage","view","vnode","src","attrs","fish","m","alt","extractText","app","trans","style","animationDuration","draggable","Basket","basket","catchTheFishBasket","fishesThatCanBePlaced","filter","map","ondragstart","event","dataTransfer","setData","time","dayjs","fromNow","DropArea","User","Link","href","avatar","username","CaughtFishModal","_Modal","newName","dirty","loading","_proto","oninit","className","title","saveNameAndPlacement","randomPlacement","_this2","body","method","url","attribute","then","result","pushPayload","hide","find","redraw","err","content","_myRanking","_this3","oninput","target","Button","type","onclick","onsubmit","preventDefault","Modal","MovingFish","reverseAnimation","Math","random","floor","classList","catchTheFishAnimateFlip","show","oncatch","alert","fishIdFromEvent","getData","match","exec","movingFishContent","dragover","model","push","fishes","catchTheFishFishes","forEach","pushData","relationships","addDropAttrs","modelProperty","ondrop","fishDragOver","fishId","getById","ondragover","dropEffect","types","includes","ondragenter","ondragleave","addAreaToComponent","component","viewName","override","original","extend","items","add","subtree","check","vdom","RoundRankings","rankings","ranking","index","Rankings","_Page","catchTheFishCanSeeRankingsPage","rounds","catchTheFishActiveRounds","Page","EditRound","processing","createRecord","toISOString","saveRecord","withAttr","updateAttribute","Switch","state","onchange","disabled","readyToSave","deleteRecord","_this$round$pushAttri","pushAttributes","save","onsave","confirm","ondelete","NewRoundModal","oncreateordelete","EditRoundModal","RoundList","refreshRounds","LinkButton","EditFish","NewFishModal","RoundSettings","roundId","uploading","route","param","refreshFishes","openPicker","callback","multiple","$input","$","attr","appendTo","click","on","files","uploadImages","images","_this4","FormData","append","serialize","raw","_this5","EditFishModal","Discussion","discussion","Post","post","number","UserModel","UpdateAlert","models","Forum","catchTheFishCanModerate","HeaderPrimary","CommentPost","UserCard","DiscussionHero","document","addEventListener","catchTheFishRankings","path","catchTheFishRounds","catchTheFishRound","IndexPage","icon","existing","additional","RoundAlert","isArray"],"sourceRoot":""}