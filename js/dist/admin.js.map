{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@clarkwinkelmann/catch-the-fish/webpack/bootstrap","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/compat get default export","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/define property getters","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/hasOwnProperty shorthand","webpack://@clarkwinkelmann/catch-the-fish/webpack/runtime/make namespace object","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['admin/app']\"","webpack://@clarkwinkelmann/catch-the-fish/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Select']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@clarkwinkelmann/catch-the-fish/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@clarkwinkelmann/catch-the-fish/./src/admin/SettingsPage.ts","webpack://@clarkwinkelmann/catch-the-fish/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/catch-the-fish/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","import {Vnode} from 'mithril';\nimport app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\n\nconst settingsPrefix = 'catch-the-fish.';\nconst translationPrefix = 'clarkwinkelmann-catch-the-fish.admin.settings.';\n\n// @ts-ignore missing view type-hint\nexport default class SettingsPage extends ExtensionPage {\n    allTagsLoaded: boolean = false\n    loadingAllTags: boolean = false\n    selectedTag: string = '0'\n\n    oninit(vnode: Vnode) {\n        super.oninit(vnode);\n\n        // Only attempt to load all tags if the Tags extension is actually enabled, otherwise the API endpoint would error\n        if (flarum.extensions['flarum-tags']) {\n            this.loadAllTags();\n        }\n    }\n\n    loadAllTags() {\n        this.loadingAllTags = true;\n\n        // Only the primary tags are loaded by default, so we need to make the same request that\n        // the tags page settings does to load the full list\n        app.store.find('tags', {include: 'parent,lastPostedDiscussion'}).then(() => {\n            this.loadingAllTags = false;\n            this.allTagsLoaded = true;\n\n            m.redraw();\n        });\n    }\n\n    content(): any {\n        return m('.ExtensionPage-settings', m('.container', [\n            m('h3', app.translator.trans(translationPrefix + 'user')),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'user-age')),\n                m('input.FormControl', {\n                    type: 'number',\n                    min: 1,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'userAgeDays', '14'),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'user-probability')),\n                m('input.FormControl.CTFFormControl--range', {\n                    type: 'number',\n                    min: 0,\n                    max: 100,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'userProbability', '33'),\n                }),\n                m('input', {\n                    type: 'range',\n                    min: 0,\n                    max: 100,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'userProbability', '33'),\n                }),\n            ]),\n            m('h3', app.translator.trans(translationPrefix + 'discussion')),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'discussion-age')),\n                m('input.FormControl', {\n                    type: 'number',\n                    min: 1,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'discussionAgeDays', '14'),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'discussion-tags')),\n                m('p.helpText', app.translator.trans(translationPrefix + 'discussion-tags-help')),\n                this.tagSettings(),\n            ]),\n            m('h3', app.translator.trans(translationPrefix + 'post')),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'post-age')),\n                m('input.FormControl', {\n                    type: 'number',\n                    min: 1,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'postAgeDays', '14'),\n                }),\n            ]),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'post-probability')),\n                m('input.FormControl.CTFFormControl--range', {\n                    type: 'number',\n                    min: 0,\n                    max: 100,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'postProbability', '50'),\n                }),\n                m('input', {\n                    type: 'range',\n                    min: 0,\n                    max: 100,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'postProbability', '50'),\n                }),\n            ]),\n            m('h3', app.translator.trans(translationPrefix + 'general')),\n            m('.Form-group', [\n                m('label', app.translator.trans(translationPrefix + 'time-to-place')),\n                m('input.FormControl', {\n                    type: 'number',\n                    min: 1,\n                    step: 1,\n                    bidi: this.setting(settingsPrefix + 'autoPlacedAfterMinutes', '5'),\n                }),\n            ]),\n            m('.Form-group', [\n                Switch.component({\n                    state: this.setting(settingsPrefix + 'alertRound', '1')() === '1',\n                    onchange: (value: string) => {\n                        this.setting(settingsPrefix + 'alertRound')(value ? '1' : '0');\n                    },\n                }, app.translator.trans(translationPrefix + 'alert-round')),\n            ]),\n            m('.Form-group', [\n                Switch.component({\n                    state: this.setting(settingsPrefix + 'animateFlip', '1')() === '1',\n                    onchange: (value: string) => {\n                        this.setting(settingsPrefix + 'animateFlip')(value ? '1' : '0');\n                    },\n                }, app.translator.trans(translationPrefix + 'animate-flip')),\n            ]),\n            m('.Form-group', this.submitButton()),\n        ]));\n    }\n\n    tagSettings(): any {\n        if (!flarum.extensions['flarum-tags']) {\n            return m('p', m('em', app.translator.trans(translationPrefix + 'discussion-tags-unavailable')));\n        }\n\n        if (this.loadingAllTags) {\n            return LoadingIndicator.component();\n        }\n\n        let tags: {\n            tagId: string\n            probability: number\n        }[] = [];\n\n        try {\n            tags = JSON.parse(this.setting(settingsPrefix + 'discussionTags')());\n        } catch (e) {\n            // do nothing, we'll reset to something usable\n        }\n\n        if (!Array.isArray(tags)) {\n            tags = [];\n        }\n\n        let options: any = {\n            '0': app.translator.trans(translationPrefix + 'tags-control.choose'),\n        };\n\n        flarum.core.compat['tags/utils/sortTags'](app.store.all('tags')).forEach(tag => {\n            if (tags.some(t => t.tagId === tag.id())) {\n                return;\n            }\n\n            options[tag.id()] = tag.name();\n        });\n\n        return m('table.CTFTagsTable', [\n            m('thead', m('tr', [\n                m('th', app.translator.trans(translationPrefix + 'tags-header.tag')),\n                m('th', app.translator.trans(translationPrefix + 'tags-header.probability')),\n                m('th'),\n            ])),\n            m('tbody', [\n                tags.map((tag, index) => {\n                    const onchange = (event: Event) => {\n                        tag.probability = parseInt((event.target as HTMLInputElement).value);\n                        this.setting(settingsPrefix + 'discussionTags')(JSON.stringify(tags));\n                    };\n\n                    const tagModel = app.store.getById('tags', tag.tagId);\n\n                    const isLastLine = index === tags.length - 1;\n\n                    return m('tr', [\n                        m('td', tagModel ? tagModel.name() : m('em', tag.tagId)),\n                        m('td', isLastLine ? m('em', app.translator.trans(translationPrefix + 'tags-fallback.' + (tags.length > 1 ? 'last-line' : 'single-line'))) : [\n                            m('input.FormControl.CTFFormControl--range', {\n                                type: 'number',\n                                min: 0,\n                                max: 100,\n                                step: 1,\n                                value: tag.probability || '',\n                                onchange,\n                            }),\n                            m('input', {\n                                type: 'range',\n                                min: 0,\n                                max: 100,\n                                step: 1,\n                                value: tag.probability || '',\n                                onchange,\n                            }),\n                        ]),\n                        m('td', [\n                            ' ',\n                            Button.component({\n                                className: 'Button Button--icon',\n                                icon: 'fas fa-chevron-down',\n                                onclick: () => {\n                                    tags.splice(index + 1, 0, ...tags.splice(index, 1));\n\n                                    this.setting(settingsPrefix + 'discussionTags')(JSON.stringify(tags));\n                                },\n                                disabled: isLastLine,\n                                title: app.translator.trans(translationPrefix + 'tags-control.down'),\n                            }),\n                            ' ',\n                            Button.component({\n                                className: 'Button Button--icon',\n                                icon: 'fas fa-chevron-up',\n                                onclick: () => {\n                                    tags.splice(index - 1, 0, ...tags.splice(index, 1));\n\n                                    this.setting(settingsPrefix + 'discussionTags')(JSON.stringify(tags));\n                                },\n                                disabled: index === 0,\n                                title: app.translator.trans(translationPrefix + 'tags-control.up'),\n                            }),\n                            ' ',\n                            Button.component({\n                                className: 'Button Button--icon',\n                                icon: 'fas fa-times',\n                                onclick: () => {\n                                    tags.splice(index, 1);\n\n                                    this.setting(settingsPrefix + 'discussionTags')(JSON.stringify(tags));\n                                },\n                                title: app.translator.trans(translationPrefix + 'tags-control.delete'),\n                            }),\n                        ]),\n                    ]);\n                }),\n                m('tr', [\n                    m('td', {\n                        colspan: 2,\n                    }, Select.component({\n                        options,\n                        value: this.selectedTag,\n                        onchange: (id: string) => {\n                            this.selectedTag = id;\n                        },\n                    })),\n                    m('td', Button.component({\n                        className: 'Button Button--block',\n                        onclick: () => {\n                            tags.push({\n                                tagId: this.selectedTag,\n                                probability: 50,\n                            });\n\n                            this.setting(settingsPrefix + 'discussionTags')(JSON.stringify(tags));\n\n                            this.selectedTag = '0';\n                        },\n                        disabled: this.selectedTag === '0',\n                    }, app.translator.trans(translationPrefix + 'tags-control.add'))),\n                ]),\n            ]),\n        ]);\n    }\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\nimport SettingsPage from './SettingsPage';\n\napp.initializers.add('clarkwinkelmann-catch-the-fish', () => {\n    app.extensionData.for('clarkwinkelmann-catch-the-fish')\n        .registerPage(SettingsPage)\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.visible'),\n            permission: 'catchthefish.visible',\n            allowGuest: true,\n        }, 'view')\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.list-rankings'),\n            permission: 'catchthefish.list-rankings',\n            allowGuest: true,\n        }, 'view')\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.participate'),\n            permission: 'catchthefish.participate',\n        }, 'reply')\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.choose-place'),\n            permission: 'catchthefish.choose-place',\n        }, 'reply')\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.choose-name'),\n            permission: 'catchthefish.choose-name',\n        }, 'reply')\n        .registerPermission({\n            icon: 'fas fa-fish',\n            label: app.translator.trans('clarkwinkelmann-catch-the-fish.admin.permissions.moderate'),\n            permission: 'catchthefish.moderate',\n        }, 'moderate');\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","settingsPrefix","translationPrefix","SettingsPage","_ExtensionPage","subClass","superClass","_this","_len","arguments","length","args","Array","_key","apply","concat","allTagsLoaded","loadingAllTags","selectedTag","create","constructor","_proto","oninit","vnode","extensions","this","loadAllTags","_this2","app","find","include","then","m","redraw","content","_this3","trans","type","min","step","bidi","setting","max","tagSettings","Switch","state","onchange","submitButton","_this4","LoadingIndicator","tags","JSON","parse","e","isArray","options","all","forEach","tag","some","t","tagId","id","name","map","index","event","probability","parseInt","target","stringify","tagModel","getById","isLastLine","Button","className","icon","onclick","_tags","splice","disabled","title","_tags2","colspan","Select","push","ExtensionPage","add","registerPage","registerPermission","label","permission","allowGuest"],"sourceRoot":""}